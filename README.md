# core-banking-lab

코어뱅킹 개발자가 겪는 **의도적 문제 시나리오**(멱등성, 동시성, 부분 실패, 보상 트랜잭션 등)를 직접 구현하고,
그 해결책을 **검증 가능한 코드/쿼리/테스트**로 남기는 실습 레포입니다.

> 현실 데이터(예: Berka / Czech Bank Dataset)는 “정합성/성능/스케일 검증” 단계에서 사용합니다.

---

## 목표

- “실제 은행에서 터지는 문제”를 **의도적으로 재현**하고
- DB/트랜잭션 레벨에서 **원인 분석**
- 애플리케이션 레벨에서 **재발 방지 설계**(idempotency key, outbox, saga/compensation 등)
- 마지막에 **100만 건 이상 데이터로 스케일 검증**(성능 튜닝 포함)

---

## 학습/구현 로드맵

### 1단계: 의도적 문제 시나리오 구현 (7일)
아래 시나리오를 “문제 발생 → 재현 절차 → 해결 코드 → 검증 쿼리”까지 한 세트로 작성합니다.

- [ ] S1. **멱등성**: 동일 이체 요청이 중복으로 들어오면?
- [ ] S2. **동시성**: 같은 계좌에서 동시에 출금/이체가 몰리면?
- [ ] S3. **부분 실패**: DB는 성공했는데 외부 호출/메시지 발행이 실패하면?
- [ ] S4. **보상 트랜잭션(Saga)**: 다단계 처리 중 중간 실패 시 어떻게 되돌릴까?
- [ ] S5. **정합성(원장/잔액)**: ledger vs balance 불일치 탐지/복구
- [ ] S6. **중복/지연 이벤트**: out-of-order, retry 폭탄 방어

### 2단계: 현실 데이터로 스케일 검증 (3일)
- [ ] 100만 건에서도 “정합성 + 성능”이 유지되는가?
- [ ] 인덱스/쿼리 튜닝, 배치 처리, 커넥션 풀/락 경합 분석

---

## 기술 스택

- Java 8+
- PostgreSQL 15+
- IntelliJ IDEA Ultimate
- Maven/Gradle, JUnit, Testcontainers

> 로컬 개발 기준. 운영 환경에 가까운 실험이 필요하면 Docker로 Postgres 실행도 추가예정.

---

